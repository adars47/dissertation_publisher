(this.webpackJsonppatient=this.webpackJsonppatient||[]).push([[0],{295:function(t,e,n){},299:function(t,e){},330:function(t,e){},333:function(t,e){},358:function(t,e){},359:function(t,e){},382:function(t,e){},384:function(t,e){},399:function(t,e){},401:function(t,e){},410:function(t,e){},412:function(t,e){},440:function(t,e){},442:function(t,e){},446:function(t,e){},448:function(t,e){},459:function(t,e){},547:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n.n(i),a=n(261),r=n.n(a),o=(n(295),n(262)),s=(n(297),n(263)),l=n.n(s),d=n(606),u=n(604),p=n(605),h=n(602),f=n(603),j=n(264),b=n.n(j),v=n(116),y=n.n(v),g=(n(194),n(265));const m=n(298);var O=async(t,e,n)=>{let i=await t.text(),c=await m.AES.decrypt(i,n).toString(m.enc.Utf8);c||y.a.error("Invalid private key supplied"),t=Object(g.a)(c,t.type);var a=window.URL.createObjectURL(t);let r=document.createElement("a");r.href=a,r.setAttribute("download",e),r.click()};const x=(t,e)=>{var n=window.URL.createObjectURL(t);let i=document.createElement("a");i.href=n,i.setAttribute("download",e),i.click()};var k=(t,e)=>{fetch("http://127.0.0.1:2222/getFile",{method:"POST",body:JSON.stringify({filePath:t})}).then((t=>t.blob())).then((n=>{let i=t.split("/");const c=t.lastIndexOf("/"),a=t.substring(c+1);"personal"!==i[9]?x(n,a):O(n,a,e)})).catch((t=>console.error(t)))},w=n(4);const P=n(548);var S=t=>{const e=new b.a("http://127.0.0.1:7545"),n=t.transactionId,[c,a]=Object(i.useState)(""),r=()=>{""!==n&&null!==n&&void 0!==n&&e.eth.getTransaction(n,(function(e,n){null!==n?n.value&&(y.a.success("Sucessfully verified transaction!"),((t,e)=>{let n=t.replace("0x","");fetch("http://127.0.0.1:2222/getFilePath?filepath="+n).then((async t=>(e=await P.decryptWithPrivateKey(e,t.headers.get("X-Signed-Enc-Key")),t.json()))).then((t=>{t.map((t=>{k(t,e)}))})).catch((t=>console.error(t)))})(n.input,t.decryption_key)):y.a.error("Invalid transaction Id")}))};return Object(i.useEffect)((()=>{r()}),[n]),Object(w.jsx)("div",{})};Object(o.registerPlugin)(l.a);var _=function(){const[t,e]=Object(i.useState)(""),[n,c]=Object(i.useState)("");return Object(w.jsxs)("div",{children:[Object(w.jsx)(S,{transactionId:t,decryption_key:n}),Object(w.jsx)(d.a,{variant:"h3",color:"inherit",component:"div",align:"center",children:"Patient Decryption Portal"}),Object(w.jsx)(u.a,{component:"main",maxWidth:"xs",children:Object(w.jsxs)(p.a,{component:"form",onSubmit:async t=>{t.preventDefault();const n=new FormData(t.currentTarget);let i=n.get("private_key").trim(),a=n.get("signed_encryption_key").trim();""!==i&&void 0!=i&&null!==i&&""!==a&&void 0!=a&&null!==a&&(e(a),c(i))},sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(d.a,{variant:"h6",color:"inherit",component:"div",children:"Please input the patient's private key"}),Object(w.jsx)(h.a,{id:"private_key",name:"private_key",label:"Patient private Key",sx:{padding:1}}),Object(w.jsx)(d.a,{variant:"h6",color:"inherit",component:"div",children:"Please input the transaction ID"}),Object(w.jsx)(h.a,{id:"signed_encryption_key",name:"signed_encryption_key",label:"Transaction id",sx:{padding:1}}),Object(w.jsx)(f.a,{variant:"contained",type:"submit",children:"Decrypt"})]})})]})};var I=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(_,{})})};var D=t=>{t&&t instanceof Function&&n.e(3).then(n.bind(null,608)).then((e=>{let{getCLS:n,getFID:i,getFCP:c,getLCP:a,getTTFB:r}=e;n(t),i(t),c(t),a(t),r(t)}))};r.a.createRoot(document.getElementById("root")).render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(I,{})})),D()}},[[547,1,2]]]);
//# sourceMappingURL=main.d0309405.chunk.js.map